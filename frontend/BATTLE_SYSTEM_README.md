# å®æ—¶å¯¹æˆ˜ç³»ç»Ÿå®ç°æ–‡æ¡£

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

æœ¬æ¬¡å®ç°äº†å¡ç‰Œå¯¹æˆ˜æ¸¸æˆçš„é«˜ä¼˜å…ˆçº§åŠŸèƒ½ - **å®æ—¶å¯¹æˆ˜ç³»ç»Ÿ**ï¼ŒåŒ…æ‹¬WebSocketé€šä¿¡ã€å¯¹æˆ˜ç•Œé¢å’Œå®Œæ•´çš„æ¸¸æˆæµç¨‹ã€‚

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### 1. æ ¸å¿ƒé€šä¿¡æœåŠ¡
- **WebSocketService** (`src/services/WebSocketService.ts`)
  - å®æ—¶WebSocketè¿æ¥ç®¡ç†
  - è‡ªåŠ¨é‡è¿æœºåˆ¶
  - ç±»å‹å®‰å…¨çš„æ¶ˆæ¯ç³»ç»Ÿ
  - äº‹ä»¶ç›‘å¬å™¨æ¨¡å¼

### 2. çŠ¶æ€ç®¡ç†
- **BattleStore** (`src/store/battleStore.ts`)
  - å¯¹æˆ˜çŠ¶æ€ç®¡ç†ï¼ˆZustandï¼‰
  - æ¸¸æˆæ•°æ®åŒæ­¥
  - UIçŠ¶æ€æ§åˆ¶

### 3. ç”¨æˆ·ç•Œé¢ç»„ä»¶

#### ä¸»è¦é¡µé¢
- **BattleRoom** (`src/pages/BattleRoom.tsx`)
  - å®æ—¶å¯¹æˆ˜æˆ¿é—´
  - è¿æ¥çŠ¶æ€ç®¡ç†
  - é”™è¯¯å¤„ç†

#### æ ¸å¿ƒç»„ä»¶
- **GameBoard** (`src/components/GameBoard.tsx`)
  - æ¸¸æˆä¸»ç•Œé¢
  - ç©å®¶çŠ¶æ€æ˜¾ç¤º
  - å®æ—¶æ•°æ®å±•ç¤º

- **ActionSelector** (`src/components/ActionSelector.tsx`)
  - è¡ŒåŠ¨é€‰æ‹©ç•Œé¢
  - å¡ç‰Œæ•ˆæœè®¡ç®—
  - äº¤äº’åé¦ˆ

- **RoundResultModal** (`src/components/RoundResultModal.tsx`)
  - å›åˆç»“æœå±•ç¤º
  - åŠ¨ç”»æ•ˆæœ
  - æ•°æ®å˜åŒ–æ˜¾ç¤º

### 4. æ ·å¼è®¾è®¡
- å®Œæ•´çš„CSSåŠ¨ç”»ç³»ç»Ÿ
- å“åº”å¼è®¾è®¡
- ç°ä»£åŒ–UIç•Œé¢
- æ¸¸æˆä¸»é¢˜é…è‰²

### 5. åŠŸèƒ½å¢å¼º
- **BattlePage** åŒ¹é…åŠŸèƒ½
- éŸ³æ•ˆç³»ç»Ÿé›†æˆ
- é¡µé¢è¿‡æ¸¡åŠ¨ç”»
- é”™è¯¯å¤„ç†æœºåˆ¶

## ğŸ® æ¸¸æˆæµç¨‹

### å¯¹æˆ˜æµç¨‹
1. **è¿›å…¥å¯¹æˆ˜å¤§å…** â†’ é€‰æ‹©å¯¹æˆ˜æ¨¡å¼
2. **å¼€å§‹åŒ¹é…** â†’ å¯»æ‰¾å¯¹æ‰‹
3. **è¿›å…¥æˆ¿é—´** â†’ WebSocketè¿æ¥å»ºç«‹
4. **ç­‰å¾…å¯¹æ‰‹** â†’ æˆ¿é—´çŠ¶æ€åŒæ­¥
5. **å¼€å§‹å¯¹æˆ˜** â†’ å®æ—¶è¡ŒåŠ¨é€‰æ‹©
6. **å›åˆç»“ç®—** â†’ æ•ˆæœè®¡ç®—å’Œå±•ç¤º
7. **æ¸¸æˆç»“æŸ** â†’ ç»“æœç»Ÿè®¡

### æŠ€æœ¯æ¶æ„
```
å‰ç«¯ç»„ä»¶å±‚
â”œâ”€â”€ Pages (é¡µé¢)
â”‚   â”œâ”€â”€ BattlePage (å¯¹æˆ˜å¤§å…)
â”‚   â””â”€â”€ BattleRoom (å¯¹æˆ˜æˆ¿é—´)
â”œâ”€â”€ Components (ç»„ä»¶)
â”‚   â”œâ”€â”€ GameBoard (æ¸¸æˆç•Œé¢)
â”‚   â”œâ”€â”€ ActionSelector (è¡ŒåŠ¨é€‰æ‹©)
â”‚   â””â”€â”€ RoundResultModal (ç»“æœå±•ç¤º)
â”œâ”€â”€ Services (æœåŠ¡)
â”‚   â””â”€â”€ WebSocketService (WebSocketé€šä¿¡)
â””â”€â”€ Store (çŠ¶æ€ç®¡ç†)
    â””â”€â”€ BattleStore (å¯¹æˆ˜çŠ¶æ€)
```

## ğŸ”§ æŠ€æœ¯å®ç°

### WebSocketé€šä¿¡åè®®
```typescript
// æ¶ˆæ¯ç±»å‹å®šä¹‰
type WebSocketMessage = 
  | { type: 'game_state'; data: GameState }
  | { type: 'player_action'; data: BattleAction }
  | { type: 'round_result'; data: RoundResult }
  | { type: 'game_over'; data: GameOverResult }
```

### æ¸¸æˆçŠ¶æ€ç®¡ç†
```typescript
interface GameState {
  roomId: string;
  player1: PlayerState;
  player2: PlayerState;
  currentRound: number;
  roundPhase: 'waiting' | 'action' | 'result' | 'finished';
  remainingTime: number;
}
```

### è¡ŒåŠ¨ç³»ç»Ÿ
```typescript
interface BattleAction {
  type: 'cake' | 'defense' | 'spray';
  playerId: string;
  timestamp: number;
}
```

## ğŸ¨ UI/UX ç‰¹è‰²

### è®¾è®¡äº®ç‚¹
- **æ¸å˜èƒŒæ™¯** - ç°ä»£åŒ–è§†è§‰æ•ˆæœ
- **æ¯›ç»ç’ƒæ•ˆæœ** - å±‚æ¬¡æ„Ÿç•Œé¢
- **åŠ¨ç”»åé¦ˆ** - æµç•…çš„äº¤äº’ä½“éªŒ
- **çŠ¶æ€æŒ‡ç¤º** - æ¸…æ™°çš„æ¸¸æˆçŠ¶æ€
- **å“åº”å¼å¸ƒå±€** - å¤šè®¾å¤‡é€‚é…

### åŠ¨ç”»ç³»ç»Ÿ
- é¡µé¢è¿‡æ¸¡åŠ¨ç”»
- æŒ‰é’®æ‚¬åœæ•ˆæœ
- åŒ¹é…çŠ¶æ€è„‰å†²
- å›åˆç»“æœå±•ç¤ºåŠ¨ç”»
- å¡ç‰Œæ•ˆæœè§¦å‘åŠ¨ç”»

## ğŸ“± å“åº”å¼æ”¯æŒ

### æ–­ç‚¹è®¾è®¡
- **æ¡Œé¢ç«¯** (1200px+) - å®Œæ•´å¸ƒå±€
- **å¹³æ¿ç«¯** (768px-1199px) - è‡ªé€‚åº”ç½‘æ ¼
- **ç§»åŠ¨ç«¯** (480px-767px) - å‚ç›´å¸ƒå±€
- **å°å±å¹•** (<480px) - ç´§å‡‘å¸ƒå±€

## ğŸš€ æ¥ä¸‹æ¥çš„ä»»åŠ¡

### é«˜ä¼˜å…ˆçº§
1. **åç«¯WebSocketæœåŠ¡å™¨**
   - å®ç°å¯¹æˆ˜æˆ¿é—´ç®¡ç†
   - æ¸¸æˆé€»è¾‘å¤„ç†
   - æ•°æ®åŒæ­¥æœºåˆ¶

2. **æ•°æ®åº“é›†æˆ**
   - å¯¹æˆ˜è®°å½•å­˜å‚¨
   - ç”¨æˆ·ç»Ÿè®¡æ›´æ–°
   - æ’è¡Œæ¦œæ•°æ®

### ä¸­ä¼˜å…ˆçº§
3. **åŒ¹é…ç³»ç»Ÿä¼˜åŒ–**
   - æ™ºèƒ½åŒ¹é…ç®—æ³•
   - æ®µä½å¹³è¡¡
   - å»¶è¿Ÿä¼˜åŒ–

4. **åŠŸèƒ½æ‰©å±•**
   - è§‚æˆ˜æ¨¡å¼
   - å›æ”¾ç³»ç»Ÿ
   - èŠå¤©åŠŸèƒ½

## ğŸ›  å¼€å‘è¯´æ˜

### å¯åŠ¨é¡¹ç›®
```bash
cd frontend
npm start
```

### æµ‹è¯•å¯¹æˆ˜åŠŸèƒ½
1. è®¿é—® `/battle` è¿›å…¥å¯¹æˆ˜å¤§å…
2. ç‚¹å‡»"å¼€å§‹åŒ¹é…"ä½“éªŒåŒ¹é…æµç¨‹
3. è®¿é—® `/battle-room` æŸ¥çœ‹å¯¹æˆ˜ç•Œé¢

### æ–‡ä»¶ç»“æ„
```
src/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ BattlePage.tsx          # å¯¹æˆ˜å¤§å…
â”‚   â”œâ”€â”€ BattleRoom.tsx          # å¯¹æˆ˜æˆ¿é—´  
â”‚   â””â”€â”€ BattleTestPage.tsx      # åŠŸèƒ½å±•ç¤ºé¡µ
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ GameBoard.tsx           # æ¸¸æˆç•Œé¢
â”‚   â”œâ”€â”€ ActionSelector.tsx      # è¡ŒåŠ¨é€‰æ‹©
â”‚   â””â”€â”€ RoundResultModal.tsx    # ç»“æœå±•ç¤º
â”œâ”€â”€ services/
â”‚   â””â”€â”€ WebSocketService.ts     # WebSocketæœåŠ¡
â””â”€â”€ store/
    â””â”€â”€ battleStore.ts          # å¯¹æˆ˜çŠ¶æ€ç®¡ç†
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### å·²å®ç°
- Reactç»„ä»¶æ‡’åŠ è½½
- çŠ¶æ€ç®¡ç†ä¼˜åŒ–
- åŠ¨ç”»æ€§èƒ½ä¼˜åŒ–
- å†…å­˜æ³„æ¼é˜²æŠ¤

### å¾…ä¼˜åŒ–
- WebSocketè¿æ¥æ± 
- å›¾ç‰‡èµ„æºå‹ç¼©
- ä»£ç åˆ†å‰²
- ç¼“å­˜ç­–ç•¥

---

**æ€»ç»“**: æœ¬æ¬¡å®ç°å®Œæˆäº†å®æ—¶å¯¹æˆ˜ç³»ç»Ÿçš„å‰ç«¯æ ¸å¿ƒåŠŸèƒ½ï¼Œä¸ºæ¸¸æˆæä¾›äº†å®Œæ•´çš„å¯¹æˆ˜ä½“éªŒæ¡†æ¶ã€‚ä¸‹ä¸€æ­¥éœ€è¦é…åˆåç«¯å¼€å‘ï¼Œå®ç°å®Œæ•´çš„å¤šäººåœ¨çº¿å¯¹æˆ˜åŠŸèƒ½ã€‚
