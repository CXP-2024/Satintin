# ç™»å½•åŠ¨ç”»æ—¶é—´ä¼˜åŒ–è¯´æ˜

## é—®é¢˜å‘ç°
ç”¨æˆ·çš„ MP4 è§†é¢‘æ–‡ä»¶é•¿åº¦ä¸º **5ç§’**ï¼Œä½†ä¹‹å‰çš„è®¾ç½®ï¼š
- æµ‹è¯•ç™»å½•ï¼šåªæœ‰ 2ç§’
- çœŸå®ç™»å½•ï¼šæ— æœ€å°æ—¶é—´ä¿è¯

è¿™å¯¼è‡´è§†é¢‘æ— æ³•æ’­æ”¾å®Œæ•´ï¼Œç”¨æˆ·ä½“éªŒä¸ä½³ã€‚

## è§£å†³æ–¹æ¡ˆ

### 1. æµ‹è¯•ç™»å½•æ—¶é—´è°ƒæ•´
```tsx
// ä» 2ç§’ è°ƒæ•´ä¸º 5ç§’
await new Promise(resolve => setTimeout(resolve, 5000));
```

### 2. çœŸå®ç™»å½•æ·»åŠ æœ€å°æ˜¾ç¤ºæ—¶é—´
```tsx
// è®°å½•å¼€å§‹æ—¶é—´
const startTime = Date.now();

// APIè°ƒç”¨å®Œæˆåï¼Œç¡®ä¿è‡³å°‘æ˜¾ç¤º5ç§’
const elapsedTime = Date.now() - startTime;
const minDisplayTime = 5000; // 5ç§’ï¼ŒåŒ¹é…è§†é¢‘é•¿åº¦
if (elapsedTime < minDisplayTime) {
  await new Promise(resolve => 
    setTimeout(resolve, minDisplayTime - elapsedTime)
  );
}
```

### 3. æµ‹è¯•é¡µé¢åŒæ­¥è°ƒæ•´
```javascript
// ä» 3ç§’ è°ƒæ•´ä¸º 5ç§’
setTimeout(() => {
  hideLoading();
}, 5000);
```

## ä¼˜åŒ–æ•ˆæœ

### âœ… æ”¹è¿›åçš„ä½“éªŒï¼š
1. **å®Œæ•´è§†é¢‘æ’­æ”¾**: ç”¨æˆ·å¯ä»¥çœ‹åˆ°å®Œæ•´çš„5ç§’è§†é¢‘å†…å®¹
2. **ä¸€è‡´çš„ä½“éªŒ**: æµ‹è¯•ç™»å½•å’ŒçœŸå®ç™»å½•éƒ½ä¿è¯5ç§’çš„æœ€å°æ˜¾ç¤ºæ—¶é—´
3. **æ›´å¥½çš„è§†è§‰æ•ˆæœ**: è§†é¢‘ä¸ä¼šè¢«çªç„¶ä¸­æ–­

### ğŸ“Š æ—¶é—´åˆ†é…ï¼š
- **è§†é¢‘é•¿åº¦**: 5ç§’
- **æµ‹è¯•ç™»å½•**: å›ºå®š5ç§’
- **çœŸå®ç™»å½•**: è‡³å°‘5ç§’ï¼ˆå¯èƒ½æ›´é•¿ï¼Œå–å†³äºç½‘ç»œï¼‰
- **æ·¡å…¥åŠ¨ç”»**: 0.3ç§’
- **åŠ è½½ç‚¹åŠ¨ç”»**: 1.4ç§’å¾ªç¯

### ğŸ¯ ä¸åŒåœºæ™¯çš„è¡¨ç°ï¼š

**åœºæ™¯1: å¿«é€Ÿç½‘ç»œ**
- APIå“åº”: 500ms
- å‰©ä½™ç­‰å¾…: 4.5s
- æ€»æ˜¾ç¤ºæ—¶é—´: 5s âœ…

**åœºæ™¯2: æ…¢é€Ÿç½‘ç»œ**
- APIå“åº”: 8s
- å‰©ä½™ç­‰å¾…: 0s
- æ€»æ˜¾ç¤ºæ—¶é—´: 8s âœ…

**åœºæ™¯3: æµ‹è¯•ç™»å½•**
- å›ºå®šç­‰å¾…: 5s
- æ€»æ˜¾ç¤ºæ—¶é—´: 5s âœ…

## æŠ€æœ¯å®ç°ç»†èŠ‚

### æ—¶é—´è®¡ç®—é€»è¾‘
```tsx
const startTime = Date.now();
// ... APIè°ƒç”¨ ...
const elapsedTime = Date.now() - startTime;
const remainingTime = Math.max(0, minDisplayTime - elapsedTime);
```

### æ—¥å¿—è¾“å‡º
```javascript
console.log(`â° [ç™»å½•æµç¨‹] ç­‰å¾…è§†é¢‘æ’­æ”¾å®Œæˆï¼Œè¿˜éœ€ ${remainingTime}ms`);
```

### é”™è¯¯å¤„ç†
å³ä½¿ç™»å½•å¤±è´¥ï¼Œæ—¶é—´è®¡ç®—é€»è¾‘ä¹Ÿä¼šæ­£å¸¸å·¥ä½œï¼Œç¡®ä¿ç”¨æˆ·çœ‹åˆ°åˆç†çš„åŠ è½½æ—¶é—´ã€‚

## é…ç½®å»ºè®®

### å¯é…ç½®çš„æ—¶é—´å¸¸é‡
å»ºè®®å°†æ—¶é—´è®¾ç½®æå–ä¸ºå¸¸é‡ï¼Œæ–¹ä¾¿åç»­è°ƒæ•´ï¼š

```tsx
const VIDEO_DURATION = 5000; // è§†é¢‘é•¿åº¦
const MIN_LOADING_TIME = VIDEO_DURATION; // æœ€å°åŠ è½½æ—¶é—´
const TEST_LOGIN_TIME = VIDEO_DURATION; // æµ‹è¯•ç™»å½•æ—¶é—´
```

### è§†é¢‘é•¿åº¦æ£€æµ‹
æœªæ¥å¯ä»¥è€ƒè™‘åŠ¨æ€æ£€æµ‹è§†é¢‘é•¿åº¦ï¼š

```tsx
const video = document.querySelector('.loading-video');
video.addEventListener('loadedmetadata', () => {
  const videoDuration = video.duration * 1000; // è½¬æ¢ä¸ºæ¯«ç§’
  // ä½¿ç”¨å®é™…è§†é¢‘é•¿åº¦
});
```

ç°åœ¨æ‚¨çš„ç™»å½•åŠ¨ç”»å°†å®Œç¾åŒ¹é…5ç§’çš„è§†é¢‘å†…å®¹ï¼Œç¡®ä¿ç”¨æˆ·èƒ½å¤Ÿæ¬£èµåˆ°å®Œæ•´çš„è§†è§‰æ•ˆæœï¼

## æ·¡å‡ºåŠ¨ç”»ä¼˜åŒ–

### é—®é¢˜å‘ç°
ä¹‹å‰åªæœ‰æ·¡å…¥åŠ¨ç”»ï¼ˆ0.3ç§’ï¼‰ï¼Œæ²¡æœ‰æ·¡å‡ºåŠ¨ç”»ï¼Œå¯¼è‡´åŠ è½½è¦†ç›–å±‚çªç„¶æ¶ˆå¤±ï¼Œç”¨æˆ·ä½“éªŒä¸å¤Ÿæµç•…ã€‚

### è§£å†³æ–¹æ¡ˆ

#### 1. æ·»åŠ çŠ¶æ€ç®¡ç†
```tsx
const [isExiting, setIsExiting] = useState<boolean>(false);
```

#### 2. åˆ›å»ºæ·¡å‡ºå‡½æ•°
```tsx
const finishLoadingWithFadeOut = async () => {
  setIsExiting(true);
  // ç­‰å¾…æ·¡å‡ºåŠ¨ç”»å®Œæˆ (1ç§’)
  await new Promise(resolve => setTimeout(resolve, 1000));
  setLoading(false);
  setIsExiting(false);
};
```

#### 3. CSS æ·¡å‡ºåŠ¨ç”»
```css
.loading-overlay {
  animation: fadeIn 1s ease-in;
}

.loading-overlay.exiting {
  animation: fadeOut 1s ease-out;
}

@keyframes fadeOut {
  from { opacity: 1; }
  to { opacity: 0; }
}
```

#### 4. æ›´æ–°ç™»å½•é€»è¾‘
- æµ‹è¯•ç™»å½•å’ŒçœŸå®ç™»å½•éƒ½ä½¿ç”¨ `finishLoadingWithFadeOut()`
- æˆåŠŸå’Œå¤±è´¥æƒ…å†µéƒ½æœ‰ä¼˜é›…çš„æ·¡å‡ºæ•ˆæœ

### ä¼˜åŒ–æ•ˆæœ
- **æµç•…è¿‡æ¸¡**: åŠ è½½åŠ¨ç”»ä¼˜é›…åœ°æ·¡å‡ºï¼Œè€Œä¸æ˜¯çªç„¶æ¶ˆå¤±
- **ä¸€è‡´ä½“éªŒ**: æ·¡å…¥å’Œæ·¡å‡ºéƒ½æ˜¯ 1ç§’ï¼Œä¿æŒä¸€è‡´çš„èŠ‚å¥
- **è§†è§‰è¿è´¯**: ç”¨æˆ·æ„Ÿå—åˆ°å®Œæ•´çš„åŠ¨ç”»å‘¨æœŸ
- **æ›´æ…¢èŠ‚å¥**: 1ç§’çš„åŠ¨ç”»æ—¶é—´æä¾›æ›´èˆ’ç¼“çš„è§†è§‰ä½“éªŒ

### æ—¶é—´è½´ä¼˜åŒ–
```
å¼€å§‹ç™»å½• â†’ æ·¡å…¥(1s) â†’ è§†é¢‘æ’­æ”¾(5s) â†’ æ·¡å‡º(1s) â†’ é¡µé¢è·³è½¬
æ€»æ—¶é—´: 7ç§’ (æ¯”åŸæ¥å¢åŠ 1.4ç§’çš„åŠ¨ç”»æ—¶é—´)
```
